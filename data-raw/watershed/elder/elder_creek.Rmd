---
title: "Elder Creek"
author: "[Sadie Gill](mailto:sgill@flowwest.com), [Mark Tompkins](mailto:mtompkins@flowwest.com), [Erin Cain](mailto:ecain@flowwest.com)"
date: "July 17, 2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
knitr::opts_knit$set(root.dir = rprojroot::find_rstudio_root_file())
library(tidyverse)
library(readxl)
library(cvpiaHabitat)
```
## Future Data Improvements
None Planned 

## Instream Spawning and Rearing Habiat
```{r}
source('data-raw/watershed/regional_approximation/mean_wua_description.R')
```
**Data Source:** 

`r print_mean_wua_details('Elder Creek')`

### Spawning and Rearing Modeling Details 

The spawning and rearing data used for Elder Creek is the regional approximation for the Upper-mid Sacramento River Region. More information about this methodology can be found [here](http://cvpia-habitat-docs-markdown.s3-website-us-west-2.amazonaws.com/watershed/Regional_Approximation.html). 

```{r}
source('data-raw/floodplain/floodplain_utils.R')
```

## Floodplain Modeling Details

**Data Source:**
[Central Valley Floodplain Evaluation and Delineation (CVFED) HEC-RAS hydraulic model](https://s3-us-west-2.amazonaws.com/cvpiahabitat-r-package/cvpia-sit-model-inputs/CombinedTM_IQAR_Final-FULL-REPORT_20140206.pdf)

`r print_model_details('Elder Creek', 'fr')`

## Floodplain Data

```{r}
elder_fp <- read_excel('data-raw/floodplain/CVPIA_FloodplainAreas.xlsx', sheet = 'ElderCreek') %>%
  mutate(watershed = 'Elder Creek') %>% 
  filter(flow_cfs >= 90)

elder_creek_floodplain <- scale_fp_flow_area_partial_model(ws = 'Elder Creek', df = elder_fp) 

knitr::kable(align = 'c', head(elder_creek_floodplain, 5))
# devtools::use_data(elder_creek_floodplain, overwrite = TRUE)
```

*...with 24 more rows*

## Floodplain Plot
```{r}
elder_creek_floodplain %>% 
  select(FR_floodplain_acres, flow_cfs, watershed)%>%
  rename(`Fall Run Chinook and Steelhead` = FR_floodplain_acres) %>% 
  gather(Species, acres, -flow_cfs, -watershed) %>% 
  ggplot(aes(flow_cfs, acres, color = Species)) +
  geom_line() +
  theme_minimal() +
  scale_color_brewer(palette = 'Dark2') +
  labs(x = 'Flow (cfs)', y = 'Total Inundated Acres')
```


