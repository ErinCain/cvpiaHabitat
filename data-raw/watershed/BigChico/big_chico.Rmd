---
title: "Big Chico Creek"
author: "[Sadie Gill](mailto:sgill@flowwest.com), [Mark Tompkins](mailto:mtompkins@flowwest.com), [Erin Cain](mailto:ecain@flowwest.com)"
date: "July 17, 2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
knitr::opts_knit$set(root.dir = rprojroot::find_rstudio_root_file())
library(tidyverse)
library(readxl)
library(cvpiaHabitat)
```

## Future Data Improvements
None Planned 

## Instream Spawning and Rearing Habiat

**Data Source:** 
No watershed specific salmonid habitat data was available for Antelope Creek. A regional weighted usable area (WUA) relationship with flow was derived for Antelope Creek by averaging the WUA values on Battle Creek, Butte Creek, Clear Creek, Cottonwood Creek and Cow Creek. The geomorphic and hydrologic conditions in Antelope Creek (watershed area = X; active channel width = Y; 2-year flow = Z) are similar to those on Battle Creek (watershed area = X; active channel width = Y; 2-year flow = Z), Butte Creek (watershed area = X; active channel width = Y; 2-year flow = Z); Clear Creek (watershed area = X; active channel width = Y; 2-year flow = Z), Cottonwood Creek (watershed area = X; active channel width = Y; 2-year flow = Z), and Cow Creek (watershed area = X; active channel width = Y; 2-year flow = Z). The regional WUA relationships for Antelope Creek were multiplied by the length of spawning and rearing extents mapped by the Science Integration Team (SIT).  

### Mean WUA plot 

include plot that shows mean WUA for all these watersheds 

```{r}
source('data-raw/floodplain/floodplain_utils.R')
```

## Floodplain Modeling Details

**Data Source:**
[Central Valley Floodplain Evaluation and Delineation (CVFED) HEC-RAS hydraulic model](https://s3-us-west-2.amazonaws.com/cvpiahabitat-r-package/cvpia-sit-model-inputs/CombinedTM_IQAR_Final-FULL-REPORT_20140206.pdf)

### Fall Run
`r print_model_details('Big Chico Creek', 'fr')`

### Spring Run and Steelhead
`r print_model_details('Big Chico Creek', 'sr')`

## Floodplain Data

```{r}
bigc_fp <- read_excel('data-raw/floodplain/CVPIA_FloodplainAreas.xlsx', sheet = 'BigChicoCreek') %>%
  mutate(watershed = 'Big Chico Creek')

threshold_flow <- bigc_fp %>% 
  filter(modeled_floodplain_area_acres == 0) %>% 
  summarise(max_flow = max(flow_cfs)) %>% 
  pull(max_flow)

big_chico_creek_floodplain <- 
  scale_fp_flow_area_partial_model(ws = 'Big Chico Creek', 
                                   df = filter(bigc_fp, flow_cfs >= threshold_flow))

knitr::kable(align = 'c', big_chico_creek_floodplain) 
# use_data(big_chico_creek_floodplain, overwrite = TRUE)
```

## Floodplain Plot
```{r}
big_chico_creek_floodplain %>% 
  select(FR_floodplain_acres, SR_floodplain_acres, watershed, flow_cfs) %>%
  rename(`Fall Run Chinook` = FR_floodplain_acres, `Spring Run Chinook and Steelhead` = SR_floodplain_acres) %>% 
  gather(Species, acres, -flow_cfs, -watershed) %>% 
  ggplot(aes(flow_cfs, acres, color = Species)) +
  geom_line() +
  theme_minimal() +
  scale_color_brewer(palette = 'Dark2') +
  labs(x = 'Flow (cfs)', y = 'Total Inundated Acres')
```

